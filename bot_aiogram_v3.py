import asyncio
import os
import logging
from aiogram import Bot, Dispatcher, types
from aiogram.enums import ParseMode
from aiogram.types import Message
from aiogram.utils.keyboard import ReplyKeyboardBuilder
from aiogram.utils.keyboard import InlineKeyboardBuilder
from aiogram.fsm.storage.memory import MemoryStorage
from aiogram import Router
from aiogram.filters import Command
from aiogram.types import FSInputFile
from aiogram.types import InlineKeyboardMarkup, InlineKeyboardButton, CallbackQuery
from aiogram.types import ReplyKeyboardRemove
from fastapi import FastAPI, Request
import hashlib
from aiogram.fsm.state import State, StatesGroup
from aiogram.fsm.context import FSMContext
import time
import random
import json
from pathlib import Path
import aiohttp
import xml.etree.ElementTree as ET


IS_DEV = False  # ‚Üê —Å—Ç–∞–≤—å False –ø—Ä–∏ –ø—É—à–µ –≤ main

# Robokassa –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
if IS_DEV:
    ROBO_LOGIN = "ai_lab"  # ‚Üê –∑–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π –ª–æ–≥–∏–Ω
    ROBO_PASSWORD1 = "R8C0KfOaLgJs9e0PD5bp"
    ROBO_PASSWORD2 = "PEZMdc7c0CJ9ujfE5Uz6"
else:
    ROBO_LOGIN = "ai_lab"
    ROBO_PASSWORD1 = "tv85vuKRjVLik9zg4K2u"
    ROBO_PASSWORD2 = "sKNbUPuD24G7P0oadt3A"


# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API_TOKEN
if IS_DEV:
    API_TOKEN = "7352951696:AAExpP-XlM-k39cpdjMDEP4FwQ_LR0f5dj0"
else:
    API_TOKEN = os.environ.get("BOT_TOKEN")
    if not API_TOKEN:
        raise RuntimeError("BOT_TOKEN is not set")

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞
bot = Bot(token=API_TOKEN, parse_mode=ParseMode.HTML)
dp = Dispatcher(storage=MemoryStorage())
router = Router()

# --- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ --- #
free_pdf_reminders = {
    # user_id: {"start": timestamp, "last_remind": None, "attempts": 0}
}
paid_view_timestamps = {
    # user_id: {"start": timestamp, "last_remind": None, "attempts": 0}
}
received_free_pdf = set()
purchased_paid_pdf = {}

FREE_REMINDER_TEXTS = [
    "üëã –¢—ã –Ω–µ –∑–∞–±—Ä–∞–ª –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π PDF ‚Äî –æ–Ω –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –¥–æ—Å—Ç—É–ø–µ–Ω.\n10 —à–∞–±–ª–æ–Ω–æ–≤, —á—Ç–æ–±—ã —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å —á–∞—Å—ã. –ó–∞–±–µ—Ä–∏ –ø–æ–∫–∞ –Ω–µ –∑–∞–±—ã–ª:",
    "üìå –ù–∞–ø–æ–º–∏–Ω–∞—é: —Ç–≤–æ–π –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π AI-–Ω–∞–±–æ—Ä –µ—â—ë –∂–¥—ë—Ç. 10 –ø—Ä–æ–º–ø—Ç–æ–≤, —á—Ç–æ–±—ã —É–ø—Ä–æ—Å—Ç–∏—Ç—å —Ä–∞–±–æ—Ç—É –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ò–ò –≤ –¥–µ–ª–µ.",
    "üîÑ –ü—Ä–æ–ø—É—Å—Ç–∏–ª —Å—Ç–∞—Ä—Ç? –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π PDF —Å –ø—Ä–æ–º–ø—Ç–∞–º–∏ –≤—Å—ë –µ—â—ë –∞–∫—Ç–∏–≤–µ–Ω. –ó–∞–±–µ—Ä–∏ ‚Äî –∏ –Ω–∞—á–Ω–∏ –ø—Ä–∏–º–µ–Ω—è—Ç—å —Å–µ–≥–æ–¥–Ω—è:"
]

PAID_REMINDER_TEXTS = [
    "üí° –£–∂–µ –ø—Ä–∏–º–µ–Ω–∏–ª –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã? –¢–æ–≥–¥–∞ —Ç—ã –≥–æ—Ç–æ–≤ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥.\n–í –ø–ª–∞—Ç–Ω—ã—Ö PDF ‚Äî –≥–ª—É–±–∂–µ, —Ç–æ—á–Ω–µ–µ –∏ –ø–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.",
    "üìà –°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å —É–∂–µ —Ä—è–¥–æ–º ‚Äî –ø–ª–∞—Ç–Ω—ã–µ PDF –ø–æ–º–æ–≥—É—Ç –≤—ã–∂–∞—Ç—å –º–∞–∫—Å–∏–º—É–º –∏–∑ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, —à–∞–±–ª–æ–Ω—ã, —á–µ–∫-–ª–∏—Å—Ç.",
    "üî• –ü–æ–∫–∞ –¥—Ä—É–≥–∏–µ –ø–∏—à—É—Ç –≤—Ä—É—á–Ω—É—é ‚Äî —É —Ç–µ–±—è –µ—Å—Ç—å —à–∞–Ω—Å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ –ò–ò. –ó–∞–±–µ—Ä–∏ –Ω—É–∂–Ω—ã–π PDF –∏ –≤–Ω–µ–¥—Ä–∏ —É–∂–µ —Å–µ–≥–æ–¥–Ω—è."
]


INV_MAP_FILE = Path("data/inv_id_map.json")
INV_MAP_FILE.parent.mkdir(parents=True, exist_ok=True)


def load_inv_map():
    try:
        if INV_MAP_FILE.exists():
            with open(INV_MAP_FILE, "r", encoding="utf-8") as f:
                return json.load(f)
    except Exception as e:
        logging.warning(f"[INV_MAP] –û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏: {e}")
    return {}


inv_id_map = load_inv_map()


def save_inv_map(data: dict):
    try:
        with open(INV_MAP_FILE, "w", encoding="utf-8") as f:
            json.dump(data, f, ensure_ascii=False)
    except Exception as e:
        logging.warning(f"[INV_MAP] –û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏: {e}")
    return {}


def strip_namespace(tree):
    for elem in tree.iter():
        if '}' in elem.tag:
            elem.tag = elem.tag.split('}', 1)[1]
    return tree

async def check_payment_status(inv_id: int) -> bool:
    url = "https://auth.robokassa.ru/Merchant/WebService/Service.asmx/OpState"
    params = {
        "MerchantLogin": ROBO_LOGIN,
        "InvoiceID": inv_id,
        "Signature": hashlib.md5(f"{ROBO_LOGIN}:{inv_id}:{ROBO_PASSWORD2}".encode()).hexdigest()
    }

    logging.info(f"[PAYMENT] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ API, InvId={inv_id}")

    async with aiohttp.ClientSession() as session:
        async with session.get(url, params=params) as resp:
            text = await resp.text()
            logging.info(f"[PAYMENT] XML-–æ—Ç–≤–µ—Ç –æ—Ç Robokassa:\n{text}")

            try:
                xml = ET.fromstring(text)
                xml = strip_namespace(xml)  # —É–¥–∞–ª—è–µ–º namespace
                code_text = xml.findtext(".//Code")

                if code_text:
                    code = code_text.strip()
                    logging.info(f"[PAYMENT] Code={code} –¥–ª—è InvId={inv_id}")
                    return code == "100"
                else:
                    logging.warning(f"[PAYMENT] –≠–ª–µ–º–µ–Ω—Ç <Code> –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ XML –¥–ª—è InvId={inv_id}")
                    return False

            except Exception as e:
                logging.error(f"[PAYMENT] –û—à–∏–±–∫–∞ —Ä–∞–∑–±–æ—Ä–∞ XML –¥–ª—è InvId={inv_id}: {e}")
                return False


# –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Å—ã–ª–æ–∫ —Å –æ–ø–ª–∞—Ç–æ–π
def generate_inv_id(user_id: int) -> int:
    # –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID: 2 —Ü–∏—Ñ—Ä—ã user_id + 6 —Ü–∏—Ñ—Ä –≤—Ä–µ–º–µ–Ω–∏ + 1 —Å–ª—É—á–∞–π–Ω–∞—è —Ü–∏—Ñ—Ä–∞
    t = int(time.time()) % 1_000_000  # –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 —Ü–∏—Ñ—Ä –≤—Ä–µ–º–µ–Ω–∏
    u = user_id % 100                 # –ø–æ—Å–ª–µ–¥–Ω–∏–µ 2 —Ü–∏—Ñ—Ä—ã user_id
    r = random.randint(0, 9)          # 1 —Å–ª—É—á–∞–π–Ω–∞—è —Ü–∏—Ñ—Ä–∞
    return int(f"{u:02}{t:06}{r}")


def generate_payment_url(user_id: int, product_code: str, price: int) -> str:
    inv_id = generate_inv_id(user_id)
    out_sum = str(price)
    base = f"{ROBO_LOGIN}:{out_sum}:{inv_id}:{ROBO_PASSWORD1}"
    sign = hashlib.md5(base.encode()).hexdigest()

    url = (
        f"https://auth.robokassa.ru/Merchant/Index.aspx?"
        f"MerchantLogin={ROBO_LOGIN}&OutSum={out_sum}&InvId={inv_id}"
        f"&SignatureValue={sign}"
    )

    if IS_DEV:
        url += "&IsTest=1"

    # —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Å–≤—è–∑–∫—É
    inv_id_map[inv_id] = {
        "user_id": user_id,
        "product_code": product_code
    }
    save_inv_map(inv_id_map)  # —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ json –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

    return url


# --- –ö–Ω–æ–ø–∫–∏ --- #
def get_main_keyboard():
    kb = ReplyKeyboardBuilder()
    kb.button(text="üìé –°–∫–∞—á–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π PDF")
    kb.button(text="üî• –ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ –ø–ª–∞—Ç–Ω—ã—Ö PDF?")
    kb.button(text="‚ú® –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã")
    kb.button(text="üì© –ù–∞–ø–∏—Å–∞—Ç—å –∞–≤—Ç–æ—Ä—É")
    kb.button(text="üìÑ –ü—É–±–ª–∏—á–Ω–∞—è –æ—Ñ–µ—Ä—Ç–∞")
    kb.adjust(1)
    return kb.as_markup(resize_keyboard=True)


def after_preview_keyboard():
    kb = ReplyKeyboardBuilder()
    kb.button(text="üî• –ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ –ø–ª–∞—Ç–Ω—ã—Ö PDF?")
    kb.adjust(1)
    return kb.as_markup(resize_keyboard=True)


# --- –•–µ–Ω–¥–ª–µ—Ä—ã --- #
@router.message(Command("start"))
async def cmd_start(message: Message):
    user_id = message.from_user.id
    if user_id not in received_free_pdf and user_id not in free_pdf_reminders:
        free_pdf_reminders[user_id] = {
            "start": time.time(),
            "last_remind": None,
            "attempts": 0
        }
    await message.answer(
        "–ü—Ä–∏–≤–µ—Ç! üëã\n\n–Ø –ø–æ–º–æ–≥—É —Ç–µ–±–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ. –ü–æ–ª—É—á–∏ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π PDF "
        "—Å 10 –ø—Ä–æ–º–ø—Ç–∞–º–∏ –∏ –Ω–∞—á–Ω–∏ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!",
        reply_markup=get_main_keyboard()
    )


@router.message(Command("cancel"))
async def cancel_state(message: Message, state: FSMContext):
    await state.clear()
    await message.answer(
        "–û–∫, –∑–∞—è–≤–∫—É –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –æ—Ñ–æ—Ä–º–∏—Ç—å –ø–æ–∑–∂–µ üëå\n–¢—ã –≤–µ—Ä–Ω—É–ª—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é üëá",
        parse_mode=ParseMode.HTML,
        reply_markup=get_main_keyboard()
    )



@router.message(Command("menu"))
async def show_menu(message: Message):
    await message.answer(
        "üè† <b>–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</b>",
        parse_mode=ParseMode.HTML,
        reply_markup=get_main_keyboard()
    )


@router.message(lambda msg: msg.text == "üìé –°–∫–∞—á–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π PDF")
async def send_pdf(message: Message):
    file = FSInputFile("data/10 –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è ChatGPT.pdf", filename="10 –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è ChatGPT.pdf")
    await message.answer_document(
        document=file,
        caption="‚úÖ –í–æ—Ç —Ç–≤–æ–π PDF —Å 10 AI-–ø—Ä–æ–º–ø—Ç–∞–º–∏ ‚Äî —Å—Ç–∞—Ä—Ç–æ–≤—ã–π –Ω–∞–±–æ—Ä, —á—Ç–æ–±—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤ –¥–µ–ª–µ."
    )

    user_id = message.from_user.id
    received_free_pdf.add(user_id)

    await message.answer(
        "üöÄ –•–æ—á–µ—à—å –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —É—Ä–æ–≤–µ–Ω—å?\n\n"
        "–£ –Ω–∞—Å –µ—Å—Ç—å 7 PDF –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –Ω–∏—à–∞–º: –º–∞—Ä–∫–µ—Ç–∏–Ω–≥, Reels, –±–ª–æ–≥–µ—Ä—ã, –∫—É—Ä—Å—ã, –æ—Ñ–ª–∞–π–Ω –∏ —Ç.–¥.\n\n"
        "–ù–∞–∂–º–∏ üëâ <b>üî• –ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ –ø–ª–∞—Ç–Ω—ã—Ö PDF?</b>",
        reply_markup=after_preview_keyboard()
    )

    if user_id in free_pdf_reminders:
        del free_pdf_reminders[user_id]


@router.message(lambda msg: msg.text == "üìÑ –ü—É–±–ª–∏—á–Ω–∞—è –æ—Ñ–µ—Ä—Ç–∞")
async def send_public_offer(message: Message):
    await message.answer(
        'üßæ <b>–ü—É–±–ª–∏—á–Ω–∞—è –æ—Ñ–µ—Ä—Ç–∞</b> –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ —Å—Å—ã–ª–∫–µ:\n\n'
        '<a href="https://telegra.ph/Publichnaya-oferta--AI-Laboratoriya-05-08">–û—Ç–∫—Ä—ã—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç</a>',
        parse_mode=ParseMode.HTML,
        reply_markup=types.ReplyKeyboardRemove()
    )


@router.message(lambda msg: msg.text == "‚ú® –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã")
async def start_custom_prompt(message: Message, state: FSMContext):
    await state.set_state(CustomPromptForm.waiting_for_description)
    await message.answer(
        "üß† <b>–û–ø–∏—à–∏ –∫–∞–∫ –º–æ–∂–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–µ–µ, –∫–∞–∫–∞—è –∑–∞–¥–∞—á–∞ –ø–µ—Ä–µ–¥ —Ç–æ–±–æ–π —Å—Ç–æ–∏—Ç:</b>\n\n"
        "‚Äî –ì–¥–µ —Ç—ã –ø–ª–∞–Ω–∏—Ä—É–µ—à—å –ø—Ä–∏–º–µ–Ω—è—Ç—å –ø—Ä–æ–º–ø—Ç—ã? (Instagram, —Å–∞–π—Ç, –ø—Ä–æ–¥–∞–∂–∏, —Ä–µ–∫–ª–∞–º–∞, –æ–±—É—á–µ–Ω–∏–µ...)\n"
        "‚Äî –ß—Ç–æ –∏–º–µ–Ω–Ω–æ —Ö–æ—á–µ—à—å –ø–æ–ª—É—á–∏—Ç—å –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ? (–∏–¥–µ–∏, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, —Ç–µ–∫—Å—Ç—ã, —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏...)\n"
        "‚Äî –ö–∞–∫–∞—è —É —Ç–µ–±—è –Ω–∏—à–∞ / –ø—Ä–æ–¥—É–∫—Ç / –∞—É–¥–∏—Ç–æ—Ä–∏—è?\n\n"
        "‚úçÔ∏è <b>–ü—Ä–∏–º–µ—Ä:</b>\n"
        "¬´–Ø –ø—Ä–æ–¥–≤–∏–≥–∞—é –æ–Ω–ª–∞–π–Ω-–∫—É—Ä—Å –¥–ª—è —ç–∫—Å–ø–µ—Ä—Ç–æ–≤. –•–æ—á—É —Å–µ—Ä–∏—é —Å—Ç–æ—Ä–∏—Å –∏ Reels, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–≤–ª–µ–∫–∞—é—Ç –∏ –≤–µ–¥—É—Ç –∫ "
        "–ø–æ–∫—É–ø–∫–µ. –¶–ê ‚Äî –ø—Å–∏—Ö–æ–ª–æ–≥–∏ –∏ –∫–æ—É—á–∏. –ö–∞–Ω–∞–ª ‚Äî Instagram.¬ª\n\n"
        "üìå –ß–µ–º –ø–æ–¥—Ä–æ–±–Ω–µ–µ ‚Äî —Ç–µ–º –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–µ–µ –±—É–¥—É—Ç –ø—Ä–æ–º–ø—Ç—ã\n\n"
        "‚úèÔ∏è –ù–∞–ø–∏—à–∏ –Ω–∏–∂–µ –∏–ª–∏ –Ω–∞–∂–º–∏ /cancel, —á—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é",
        parse_mode=ParseMode.HTML,
        reply_markup=types.ReplyKeyboardRemove()
    )


@router.callback_query(lambda c: c.data == "custom_prompt")
async def handle_custom_prompt_button(callback: CallbackQuery, state: FSMContext):
    await callback.message.answer(
        "üß† <b>–û–ø–∏—à–∏ –∫–∞–∫ –º–æ–∂–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–µ–µ, –∫–∞–∫–∞—è –∑–∞–¥–∞—á–∞ –ø–µ—Ä–µ–¥ —Ç–æ–±–æ–π —Å—Ç–æ–∏—Ç:</b>\n\n"
        "‚Äî –ì–¥–µ —Ç—ã –ø–ª–∞–Ω–∏—Ä—É–µ—à—å –ø—Ä–∏–º–µ–Ω—è—Ç—å –ø—Ä–æ–º–ø—Ç—ã? (Instagram, —Å–∞–π—Ç, –ø—Ä–æ–¥–∞–∂–∏, —Ä–µ–∫–ª–∞–º–∞, –æ–±—É—á–µ–Ω–∏–µ...)\n"
        "‚Äî –ß—Ç–æ –∏–º–µ–Ω–Ω–æ —Ö–æ—á–µ—à—å –ø–æ–ª—É—á–∏—Ç—å –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ? (–∏–¥–µ–∏, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, —Ç–µ–∫—Å—Ç—ã, —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏...)\n"
        "‚Äî –ö–∞–∫–∞—è —É —Ç–µ–±—è –Ω–∏—à–∞ / –ø—Ä–æ–¥—É–∫—Ç / –∞—É–¥–∏—Ç–æ—Ä–∏—è?\n\n"
        "‚úçÔ∏è <b>–ü—Ä–∏–º–µ—Ä:</b>\n"
        "¬´–Ø –ø—Ä–æ–¥–≤–∏–≥–∞—é –æ–Ω–ª–∞–π–Ω-–∫—É—Ä—Å –¥–ª—è —ç–∫—Å–ø–µ—Ä—Ç–æ–≤. –•–æ—á—É —Å–µ—Ä–∏—é —Å—Ç–æ—Ä–∏—Å –∏ Reels, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–≤–ª–µ–∫–∞—é—Ç –∏ –≤–µ–¥—É—Ç –∫ –ø–æ–∫—É–ø–∫–µ. "
        "–¶–ê ‚Äî –ø—Å–∏—Ö–æ–ª–æ–≥–∏ –∏ –∫–æ—É—á–∏. –ö–∞–Ω–∞–ª ‚Äî Instagram.¬ª\n\n"
        "üìå –ß–µ–º –ø–æ–¥—Ä–æ–±–Ω–µ–µ ‚Äî —Ç–µ–º –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–µ–µ –±—É–¥—É—Ç –ø—Ä–æ–º–ø—Ç—ã\n\n"
        "‚úèÔ∏è –ù–∞–ø–∏—à–∏ –Ω–∏–∂–µ –∏–ª–∏ –Ω–∞–∂–º–∏ /cancel, —á—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é",
        parse_mode=ParseMode.HTML
    )
    await state.set_state(CustomPromptForm.waiting_for_description)
    await callback.answer()


# --- –•–µ–Ω–¥–ª–µ—Ä: –æ–ø–∏—Å–∞–Ω–∏–µ –ø–ª–∞—Ç–Ω–æ–≥–æ PDF --- #
@router.message(lambda msg: msg.text == "üî• –ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ –ø–ª–∞—Ç–Ω—ã—Ö PDF?")
async def show_paid_options(message: Message):
    # –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å –Ω–∏—à–∞–º–∏
    kb = InlineKeyboardBuilder()
    kb.button(text="üìπ Reels", callback_data="niche_reels")
    kb.button(text="üì± SMM", callback_data="niche_smm")
    kb.button(text="üë§ –ë–ª–æ–≥–µ—Ä—ã", callback_data="niche_blog")
    kb.button(text="üè™ –û—Ñ–ª–∞–π–Ω-–±–∏–∑–Ω–µ—Å", callback_data="niche_offline")
    kb.button(text="üéì –û–Ω–ª–∞–π–Ω-–∫—É—Ä—Å—ã", callback_data="niche_courses")
    kb.button(text="üì¶ –¢–æ–≤–∞—Ä–∫–∞", callback_data="niche_ecom")
    kb.button(text="üíº –§—Ä–∏–ª–∞–Ω—Å", callback_data="niche_freelance")
    kb.adjust(2)

    user_id = message.from_user.id
    if user_id not in purchased_paid_pdf and user_id not in paid_view_timestamps:
        paid_view_timestamps[user_id] = {
            "start": time.time(),
            "last_remind": None,
            "attempts": 0
        }

    await message.answer(
        "üëá –í—ã–±–µ—Ä–∏ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â—É—é –Ω–∏—à—É, —á—Ç–æ–±—ã —Ä–∞—Å–∫—Ä—ã—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ PDF –∏ –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –ø–æ–∫—É–ø–∫—É:",
        reply_markup=kb.as_markup()
    )

    # –û—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø—Ä–æ –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã
    ind_kb = InlineKeyboardBuilder()
    ind_kb.button(text="‚ú® –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã", callback_data="custom_prompt")
    await message.answer(
        "‚ùì –ù–µ –Ω–∞—à—ë–ª —Å–≤–æ—é –Ω–∏—à—É?\n–ü–æ–ø—Ä–æ–±—É–π <b>–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã</b> ‚Äî –º—ã —Å–æ–±–µ—Ä—ë–º PDF –ø–æ–¥ —Ç–≤–æ—é –∑–∞–¥–∞—á—É:",
        parse_mode=ParseMode.HTML,
        reply_markup=ind_kb.as_markup()
    )

    await message.answer(
        "üëá –î–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é",
        reply_markup=types.ReplyKeyboardRemove()
    )


@router.callback_query(lambda c: c.data.startswith("niche_"))
async def show_niche_pdf(callback: CallbackQuery):
    niche = callback.data.replace("niche_", "")
    descriptions = {
        "reels": (
            "üé¨ <b>Reels-–ø—Ä–æ–º–ø—Ç—ã –¥–ª—è Instagram –∏ TikTok</b>\n\n"
            "‚ö° –•–≤–∞—Ç–∏—Ç —Å–Ω–∏–º–∞—Ç—å –Ω–∞–æ–±—É–º! –≠—Ç–æ—Ç PDF –¥–∞—ë—Ç:\n"
            "‚Ä¢ 5 –≤–∏—Ä—É—Å–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –ø–æ–¥ Reels + –∫—Ä—é—á–∫–∏, —Ö–µ—à—Ç–µ–≥–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–∏–¥–µ–æ\n"
            "‚Ä¢ –ü—Ä–∏–º–µ—Ä—ã —Ñ–æ—Ä–º–∞—Ç–æ–≤: voiceover, —ç–∫—Ä–∞–Ω, —Å–µ–ª—Ñ–∏\n"
            "‚Ä¢ –°—Ç–∏–ª–∏ –ø–æ–¥–∞—á–∏: –æ—Ç —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ–≥–æ –¥–æ –¥–µ—Ä–∑–∫–æ–≥–æ\n\n"
            "üß© –¢—ã –ø–æ–ª—É—á–∏—à—å 5 –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ—Ä–∞–±–æ—Ç–∞–Ω –ø–æ–¥ –∫–ª—é—á–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –Ω–∏—à–∏.\n"
            "–û–Ω–∏ —Ç–æ—á–Ω–µ–µ, –≥–ª—É–±–∂–µ –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω–µ–µ, —á–µ–º –≤ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º PDF ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.\n\n"
            "üí¨ –ß–∞—Å—Ç—ã–µ —Å–æ–º–Ω–µ–Ω–∏—è:\n"
            "‚Äì ¬´–£–∂–µ —Å–Ω–∏–º–∞–ª, –Ω–µ –∑–∞—Ö–æ–¥–∏—Ç¬ª ‚Üí –ü—Ä–æ–º–ø—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–¥ –∞–ª–≥–æ—Ä–∏—Ç–º—ã 2025\n"
            "‚Äì ¬´–ù–µ –∑–Ω–∞—é, —á—Ç–æ —Å–∫–∞–∑–∞—Ç—å –≤ –∫–∞–¥—Ä–µ¬ª ‚Üí –ü—Ä–æ—Å—Ç–æ —Å–ª–µ–¥—É–π —à–∞–±–ª–æ–Ω—É: 1 –º–∏–Ω—É—Ç–∞ ‚Äî –∏ –≤–∏–¥–µ–æ –≥–æ—Ç–æ–≤–æ\n\n"
            "üéØ –£–∂–µ —á–µ—Ä–µ–∑ 10 –º–∏–Ω—É—Ç —É —Ç–µ–±—è –±—É–¥–µ—Ç 5 –≥–æ—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —Å–Ω–∏–º–∞—Ç—å —Å–µ–≥–æ–¥–Ω—è\n"
            "‚ùó –ò–ª–∏ —Å–Ω–æ–≤–∞ –ø–æ—Ç—Ä–∞—Ç–∏—à—å –≤–µ—á–µ—Ä, –ª–∏—Å—Ç–∞—è Reels –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ –±–µ–∑ –ø–ª–∞–Ω–∞\n"
            "üí≥ PDF –∑–∞ 249 ‚ÇΩ ‚Äî –∏ —Ç—ã —Å–Ω–∏–º–∞–µ—à—å —É–≤–µ—Ä–µ–Ω–Ω–æ, –±–µ–∑ —Å—Ç—É–ø–æ—Ä–∞\n\n"
            "üîç <b>–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ PDF:</b>\n"
            "‚Ä¢ 5 –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ –ø–æ–¥ –∫–ª—é—á–µ–≤—ã–µ –∑–∞–¥–∞—á–∏ –≤ –Ω–∏—à–µ\n"
            "‚Ä¢ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é (–∫—É–¥–∞ –≤—Å—Ç–∞–≤–ª—è—Ç—å, —á—Ç–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å)\n"
            "‚Ä¢ üéÅ –ë–æ–Ω—É—Å: —á–µ–∫-–ª–∏—Å—Ç ¬´<i>–ö–∞–∫ –æ—Ñ–æ—Ä–º–∏—Ç—å Reels, —á—Ç–æ–±—ã —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ—Å–º–æ—Ç—Ä—ã –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è</i>¬ª ‚Äî —á—Ç–æ–±—ã –≤–Ω–µ–¥—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—ã—Å—Ç—Ä–µ–µ"
        ),

        "smm": (
            "üì± <b>–ü—Ä–æ–º–ø—Ç—ã –¥–ª—è SMM-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç-–º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞</b>\n\n"
            "üìå –°—Ñ–æ—Ä–º–∏—Ä—É–π –º–æ—â–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç-–ø–ª–∞–Ω –∑–∞ —á–∞—Å:\n"
            "‚Ä¢ –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –ª–∏–¥-–º–∞–≥–Ω–∏—Ç–æ–≤, –ø—Ä–æ–≥—Ä–µ–≤–æ–≤, –∞–∫—Ü–∏–π\n"
            "‚Ä¢ –ò–¥–µ–∏ –≤–æ–≤–ª–µ–∫–∞—é—â–∏—Ö –ø–æ—Å—Ç–æ–≤ –∏ Reels\n"
            "‚Ä¢ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∏ —Å—Ç–æ—Ä–∏—Ç–µ–ª–ª–∏–Ω–≥–∞\n\n"
            "üß© –¢—ã –ø–æ–ª—É—á–∏—à—å 5 –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ—Ä–∞–±–æ—Ç–∞–Ω –ø–æ–¥ –∫–ª—é—á–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –Ω–∏—à–∏.\n"
            "–û–Ω–∏ —Ç–æ—á–Ω–µ–µ, –≥–ª—É–±–∂–µ –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω–µ–µ, —á–µ–º –≤ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º PDF ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.\n\n"
            "üí¨ –ß–∞—Å—Ç—ã–µ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è:\n"
            "‚Äì ¬´–£ –∫–ª–∏–µ–Ω—Ç–æ–≤ —Ä–∞–∑–Ω–∞—è –Ω–∏—à–∞¬ª ‚Üí –ü—Ä–æ–º–ø—Ç—ã —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã –∏ –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ–¥ –ª—é–±—É—é —Ç–µ–º—É\n"
            "‚Äì ¬´–Ø —É–∂–µ —Ä–∞–±–æ—Ç–∞—é —Å –ò–ò¬ª ‚Üí –ù–æ —Ç—ã –Ω–µ –≤–∏–¥–µ–ª —Ç–∞–∫–∏—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π: –æ–Ω–∏ –ø—Ä–æ–¥–≤–∏–≥–∞—é—Ç, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –ø–∏—à—É—Ç\n\n"
            "üéØ –£–∂–µ —Å–µ–≥–æ–¥–Ω—è —Ç—ã —Å–º–æ–∂–µ—à—å –Ω–∞–±—Ä–æ—Å–∞—Ç—å –ø–ª–∞–Ω –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω–∞ –Ω–µ–¥–µ–ª—é –≤–ø–µ—Ä—ë–¥\n"
            "‚ùó –ò–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—à—å –≤—ã–º—É—á–∏–≤–∞—Ç—å –ø–æ—Å—Ç—ã –ø–æ –æ–¥–Ω–æ–π –∏–¥–µ–µ –≤ –¥–µ–Ω—å\n"
            "üí≥ PDF –∑–∞ 249 ‚ÇΩ ‚Äî –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç—â–∏–∫–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –Ω–æ–µ—Ç –∏ –Ω–µ —É—Å—Ç–∞–µ—Ç\n\n"
            "üîç <b>–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ PDF:</b>\n"
            "‚Ä¢ 5 –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ –ø–æ–¥ –∫–ª—é—á–µ–≤—ã–µ –∑–∞–¥–∞—á–∏ –≤ –Ω–∏—à–µ\n"
            "‚Ä¢ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é (–∫—É–¥–∞ –≤—Å—Ç–∞–≤–ª—è—Ç—å, —á—Ç–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å)\n"
            "‚Ä¢ üéÅ –ë–æ–Ω—É—Å: —á–µ–∫-–ª–∏—Å—Ç ¬´<i>–ö–æ–Ω—Ç–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–æ—Ö—Ä–∞–Ω—è—é—Ç, –∫–æ–º–º–µ–Ω—Ç–∏—Ä—É—é—Ç –∏ –∂–¥—É—Ç</i>¬ª ‚Äî —á—Ç–æ–±—ã –≤–Ω–µ–¥—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—ã—Å—Ç—Ä–µ–µ"
        ),

        "blog": (
            "üë§ <b>–ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –±–ª–æ–≥–µ—Ä–æ–≤ –∏ –ª–∏—á–Ω–æ–≥–æ –±—Ä–µ–Ω–¥–∞</b>\n\n"
            "üéØ –°–¥–µ–ª–∞–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å–∏–ª—å–Ω—ã–º, –∏—Å–∫—Ä–µ–Ω–Ω–∏–º –∏ —Ü–µ–ø–ª—è—é—â–∏–º:\n"
            "‚Ä¢ –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ä–∞—Å–∫—Ä—ã—Ç–∏—è —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ—Å—Ç–∏ –∏ —ç–º–æ—Ü–∏–π\n"
            "‚Ä¢ –®–∞–±–ª–æ–Ω—ã –ø—Ä–æ–≥—Ä–µ–≤–æ–≤, —Ä—É–±—Ä–∏–∫ –∏ —Å—Ç–æ—Ä–∏—Å\n"
            "‚Ä¢ –°—Ç—Ä—É–∫—Ç—É—Ä—ã –≤–æ–≤–ª–µ–∫–∞—é—â–µ–≥–æ –ø–æ–≤–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è\n\n"
            "üß© –¢—ã –ø–æ–ª—É—á–∏—à—å 5 –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ—Ä–∞–±–æ—Ç–∞–Ω –ø–æ–¥ –∫–ª—é—á–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –Ω–∏—à–∏.\n"
            "–û–Ω–∏ —Ç–æ—á–Ω–µ–µ, –≥–ª—É–±–∂–µ –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω–µ–µ, —á–µ–º –≤ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º PDF ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.\n\n"
            "üí¨ –°–æ–º–Ω–µ–Ω–∏—è:\n"
            "‚Äì ¬´–Ø –Ω–µ —É–º–µ—é –∫—Ä–∞—Å–∏–≤–æ –ø–∏—Å–∞—Ç—å¬ª ‚Üí –ü—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–≤—å —Å–≤–æ–∏ –º—ã—Å–ª–∏ –≤ —à–∞–±–ª–æ–Ω ‚Äî –ø–æ–ª—É—á–∏—Ç—Å—è –æ–≥–æ–Ω—å\n"
            "‚Äì ¬´–ú–æ—è —Ç–µ–º–∞ –Ω–µ –∑–∞—Ö–æ–¥–∏—Ç¬ª ‚Üí –ë—Ä–µ–Ω–¥ –ø—Ä–æ–¥–∞—ë—Ç —á–µ—Ä–µ–∑ –¥–æ–≤–µ—Ä–∏–µ, –∞ –Ω–µ —á–µ—Ä–µ–∑ —Ç–µ–º—É. –≠—Ç–∏ –ø—Ä–æ–º–ø—Ç—ã —Å—Ç—Ä–æ—è—Ç –¥–æ–≤–µ—Ä–∏–µ\n\n"
            "üéØ –£ —Ç–µ–±—è –±—É–¥–µ—Ç –∑–∞–ø–∞—Å –ø–æ—Å—Ç–æ–≤ –∏ —Å—Ç–æ—Ä–∏—Å —Å —Å–∏–ª—å–Ω—ã–º –ø–æ—Å—ã–ª–æ–º —É–∂–µ —Å–µ–≥–æ–¥–Ω—è\n"
            "‚ùó –ò–ª–∏ –æ–ø—è—Ç—å –æ—Ç–∫—Ä–æ–µ—à—å Instagram ‚Äî –∏ –∑–∞–∫—Ä–æ–µ—à—å, –Ω–µ –∑–Ω–∞—è, —á—Ç–æ –ø–∏—Å–∞—Ç—å\n"
            "üí≥ PDF –∑–∞ 249 ‚ÇΩ ‚Äî —Ç–≤–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç-–ø—Ä–æ–¥—é—Å–µ—Ä –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ\n\n"
            "üîç <b>–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ PDF:</b>\n"
            "‚Ä¢ 5 –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ –ø–æ–¥ –∫–ª—é—á–µ–≤—ã–µ –∑–∞–¥–∞—á–∏ –≤ –Ω–∏—à–µ\n"
            "‚Ä¢ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é (–∫—É–¥–∞ –≤—Å—Ç–∞–≤–ª—è—Ç—å, —á—Ç–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å)\n"
            "‚Ä¢ üéÅ –ë–æ–Ω—É—Å: —á–µ–∫-–ª–∏—Å—Ç ¬´<i>–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ª–∏—á–Ω—ã–π –±—Ä–µ–Ω–¥ –º–∞–≥–Ω–∏—Ç–æ–º –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤</i>¬ª ‚Äî —á—Ç–æ–±—ã –≤–Ω–µ–¥—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—ã—Å—Ç—Ä–µ–µ"
        ),

        "offline": (
            "üè™ <b>–ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –º–∞–ª–æ–≥–æ –æ—Ñ–ª–∞–π–Ω-–±–∏–∑–Ω–µ—Å–∞</b>\n\n"
            "üì¶ –ú–∞–≥–∞–∑–∏–Ω, —Å–∞–ª–æ–Ω, —Å—Ç—É–¥–∏—è ‚Äî —Å–¥–µ–ª–∞–π —Ç–∞–∫, —á—Ç–æ–±—ã –∫–ª–∏–µ–Ω—Ç—ã —Ö–æ—Ç–µ–ª–∏ –ø—Ä–∏–π—Ç–∏:\n"
            "‚Ä¢ –ì–æ—Ç–æ–≤—ã–µ —Ç–µ–∫—Å—Ç—ã –¥–ª—è –ø–æ—Å—Ç–æ–≤, –ª–∏—Å—Ç–æ–≤–æ–∫ –∏ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–æ–≤\n"
            "‚Ä¢ –ò–¥–µ–∏ —Å—Ç–æ—Ä–∏—Å, –∞–∫—Ü–∏–π –∏ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Ä–æ–ª–∏–∫–æ–≤\n"
            "‚Ä¢ –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑—ã –∏ –≤—ã–≥–æ–¥—ã\n\n"
            "üß© –¢—ã –ø–æ–ª—É—á–∏—à—å 5 –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ—Ä–∞–±–æ—Ç–∞–Ω –ø–æ–¥ –∫–ª—é—á–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –Ω–∏—à–∏.\n"
            "–û–Ω–∏ —Ç–æ—á–Ω–µ–µ, –≥–ª—É–±–∂–µ –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω–µ–µ, —á–µ–º –≤ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º PDF ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.\n\n"
            "üí¨ –ß–∞—Å—Ç—ã–µ —Å–æ–º–Ω–µ–Ω–∏—è:\n"
            "‚Äì ¬´–ê —É –º–µ–Ω—è –ª–æ–∫–∞–ª—å–Ω—ã–π –±–∏–∑–Ω–µ—Å¬ª ‚Üí –ò–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É —Ç–µ–±–µ –Ω—É–∂–µ–Ω —Å–∏–ª—å–Ω—ã–π –ø–æ—Å—ã–ª –≤ –æ–Ω–ª–∞–π–Ω–µ\n"
            "‚Äì ¬´–Ø –Ω–µ –∫–æ–ø–∏—Ä–∞–π—Ç–µ—Ä¬ª ‚Üí –ò –Ω–µ –Ω–∞–¥–æ. –ü—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–π —à–∞–±–ª–æ–Ω –∏ –≤—Å—Ç–∞–≤—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–≤–æ–µ–≥–æ –±–∏–∑–Ω–µ—Å–∞\n\n"
            "üéØ –£–∂–µ —Å–µ–≥–æ–¥–Ω—è —Å–º–æ–∂–µ—à—å –æ—Ñ–æ—Ä–º–∏—Ç—å –ø–æ—Å—Ç, –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –∏ —Ä–∞—Å—Å—ã–ª–∫—É –±–µ–∑ –≥–æ–ª–æ–≤–Ω–æ–π –±–æ–ª–∏\n"
            "‚ùó –ò–ª–∏ –æ—Å—Ç–∞–≤–∏—à—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—É—Å—Ç–æ–π ‚Äî –∏ –∫–ª–∏–µ–Ω—Ç—ã –ø–æ–π–¥—É—Ç –∫ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç—É\n"
            "üí≥ PDF –∑–∞ 249 ‚ÇΩ ‚Äî –∫–∞–∫ –Ω–∞–Ω—è—Ç—å –º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥–∞ –Ω–∞ 1 –¥–µ–Ω—å –∑–∞ –∫–æ–ø–µ–π–∫–∏\n\n"
            "üîç <b>–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ PDF:</b>\n"
            "‚Ä¢ 5 –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ –ø–æ–¥ –∫–ª—é—á–µ–≤—ã–µ –∑–∞–¥–∞—á–∏ –≤ –Ω–∏—à–µ\n"
            "‚Ä¢ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é (–∫—É–¥–∞ –≤—Å—Ç–∞–≤–ª—è—Ç—å, —á—Ç–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å)\n"
            "‚Ä¢ üéÅ –ë–æ–Ω—É—Å: —á–µ–∫-–ª–∏—Å—Ç ¬´<i>–ö–∞–∫ –ø—Ä–æ–¥–∞–≤–∞—Ç—å —á–µ—Ä–µ–∑ –ª–∏—á–Ω—ã–π —Å—Ç–∏–ª—å, –¥–∞–∂–µ –µ—Å–ª–∏ —É —Ç–µ–±—è –æ—Ñ–ª–∞–π–Ω-–±–∏–∑–Ω–µ—Å</i>¬ª ‚Äî —á—Ç–æ–±—ã –≤–Ω–µ–¥—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—ã—Å—Ç—Ä–µ–µ"
        ),

        "courses": (
            "üéì <b>–ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –æ–Ω–ª–∞–π–Ω-–∫—É—Ä—Å–æ–≤ –∏ –∏–Ω—Ñ–æ–±–∏–∑–Ω–µ—Å–∞</b>\n\n"
            "üöÄ –ó–∞–ø—É—Å–∫ –Ω–∞ –∞–≤—Ç–æ–ø–∏–ª–æ—Ç–µ:\n"
            "‚Ä¢ –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫—É—Ä—Å–∞, —É—Ä–æ–∫–æ–≤, –≤–µ–±–∏–Ω–∞—Ä–∞, –ª–µ–Ω–¥–∏–Ω–≥–∞\n"
            "‚Ä¢ –ò–¥–µ–∏ –¥–ª—è ¬´–ø—Ä–æ–≥—Ä–µ–≤–∞¬ª –∏ —Å—Ç–æ—Ä–∏—Ç–µ–ª–ª–∏–Ω–≥–∞\n"
            "‚Ä¢ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ñ—Ñ–µ—Ä–æ–≤ –∏ –ª–∏–¥-–º–∞–≥–Ω–∏—Ç–æ–≤\n\n"
            "üß© –¢—ã –ø–æ–ª—É—á–∏—à—å 5 –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ—Ä–∞–±–æ—Ç–∞–Ω –ø–æ–¥ –∫–ª—é—á–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –Ω–∏—à–∏.\n"
            "–û–Ω–∏ —Ç–æ—á–Ω–µ–µ, –≥–ª—É–±–∂–µ –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω–µ–µ, —á–µ–º –≤ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º PDF ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.\n\n"
            "üí¨ –°–æ–º–Ω–µ–Ω–∏—è:\n"
            "‚Äì ¬´–Ø —Ç–æ–ª—å–∫–æ —Å–æ–±–∏—Ä–∞—é—Å—å –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è¬ª ‚Üí –ó–Ω–∞—á–∏—Ç, –Ω–∞—á–Ω–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚Äî —Å —á—ë—Ç–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –æ—Ñ—Ñ–µ—Ä–∞\n"
            "‚Äì ¬´–Ø —É–∂–µ –ø—Ä–æ–¥–∞—é¬ª ‚Üí –¢–æ–≥–¥–∞ —Å–æ–∫—Ä–∞—Ç–∏ –≤—Ä–µ–º—è –∏ —É—Å–∏–ª–∏—è –Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç –≤ 5 —Ä–∞–∑\n\n"
            "üéØ –ß–µ—Ä–µ–∑ 15 –º–∏–Ω—É—Ç —É —Ç–µ–±—è –±—É–¥–µ—Ç –∫–∞—Ä–∫–∞—Å –∫—É—Ä—Å–∞ –∏ –ø—Ä–æ–¥–∞—é—â–∏–π —Ç–µ–∫—Å—Ç\n"
            "‚ùó –ò–ª–∏ –±—É–¥–µ—à—å —Å–Ω–æ–≤–∞ –ø–∏—Å–∞—Ç—å –≤—Å—ë ¬´—Å –Ω—É–ª—è¬ª –∫–∞–∂–¥—ã–π –∑–∞–ø—É—Å–∫\n"
            "üí≥ PDF –∑–∞ 249 ‚ÇΩ ‚Äî –±–µ–∑ –º–µ—Ç–æ–¥–∏—Å—Ç–∞, –±–µ–∑ –∫–æ–ø–∏—Ä–∞–π—Ç–µ—Ä–∞, –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫\n\n"
            "üîç <b>–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ PDF:</b>\n"
            "‚Ä¢ 5 –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ –ø–æ–¥ –∫–ª—é—á–µ–≤—ã–µ –∑–∞–¥–∞—á–∏ –≤ –Ω–∏—à–µ\n"
            "‚Ä¢ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é (–∫—É–¥–∞ –≤—Å—Ç–∞–≤–ª—è—Ç—å, —á—Ç–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å)\n"
            "‚Ä¢ üéÅ –ë–æ–Ω—É—Å: —á–µ–∫-–ª–∏—Å—Ç ¬´<i>–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ –ø—Ä–æ–¥–∞—é—â–µ–º –ø–æ—Å—Ç–µ, Reels –∏–ª–∏ —ç—Ñ–∏—Ä–µ</i>¬ª ‚Äî —á—Ç–æ–±—ã –≤–Ω–µ–¥—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—ã—Å—Ç—Ä–µ–µ"
        ),

        "ecom": (
            "üì¶ <b>–ü—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ç–æ–≤–∞—Ä–∫–∏ –∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–æ–≤</b>\n\n"
            "üõç –ü—Ä–æ–¥–∞–≤–∞–π —Å–ª–æ–≤–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ü–µ–ø–ª—è—é—Ç:\n"
            "‚Ä¢ –£–ø–∞–∫–æ–≤–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫: –æ—Ñ—Ñ–µ—Ä—ã, –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞, –£–¢–ü\n"
            "‚Ä¢ –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤, —Å—Ç–æ—Ä–∏—Å, —Ä–µ–∫–ª–∞–º—ã\n"
            "‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–æ–≤ –≤ –ø–µ—Ä–µ–ø–∏—Å–∫–µ\n\n"
            "üß© –¢—ã –ø–æ–ª—É—á–∏—à—å 5 –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ—Ä–∞–±–æ—Ç–∞–Ω –ø–æ–¥ –∫–ª—é—á–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –Ω–∏—à–∏.\n"
            "–û–Ω–∏ —Ç–æ—á–Ω–µ–µ, –≥–ª—É–±–∂–µ –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω–µ–µ, —á–µ–º –≤ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º PDF ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.\n\n"
            "üí¨ –í–æ–∑—Ä–∞–∂–µ–Ω–∏—è:\n"
            "‚Äì ¬´–ú–æ–π —Ç–æ–≤–∞—Ä –Ω–µ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –¥—Ä—É–≥–∏—Ö¬ª ‚Üí –°–ª–æ–≤–∞ —Ä–µ—à–∞—é—Ç. –≠—Ç–∏ –ø—Ä–æ–º–ø—Ç—ã –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç –æ–±—ã—á–Ω—ã–π —Ç–æ–≤–∞—Ä –≤ ¬´–Ω–∞–¥–æ —Å—Ä–æ—á–Ω–æ¬ª\n"
            "‚Äì ¬´–ù–µ—Ç –≤—Ä–µ–º–µ–Ω–∏¬ª ‚Üí –ì–æ—Ç–æ–≤—ã–π —Ñ–∞–π–ª = 15 –º–∏–Ω—É—Ç ‚Äî –∏ –ø—Ä–æ–¥–∞—é—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –≥–æ—Ç–æ–≤\n\n"
            "üéØ –£–∂–µ —Å–µ–≥–æ–¥–Ω—è —Ç—ã —Å–º–æ–∂–µ—à—å –ø–µ—Ä–µ—É–ø–∞–∫–æ–≤–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É —Ç–æ–≤–∞—Ä–∞ –∏ —Ç–µ–∫—Å—Ç—ã\n"
            "‚ùó –ò–ª–∏ –±—É–¥–µ—à—å —Å–Ω–æ–≤–∞ —Å–Ω–∏–∂–∞—Ç—å —Ü–µ–Ω—É –∏ –∂–¥–∞—Ç—å –æ—Ç–∫–ª–∏–∫–∞\n"
            "üí≥ PDF –∑–∞ 249 ‚ÇΩ ‚Äî —Ç–≤–æ–π —Å–∫—Ä—ã—Ç—ã–π –ø—Ä–æ–¥–∞–≤–µ—Ü –Ω–∞ –≤—Å–µ—Ö –ø–ª–æ—â–∞–¥–∫–∞—Ö\n\n"
            "üîç <b>–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ PDF:</b>\n"
            "‚Ä¢ 5 –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ –ø–æ–¥ –∫–ª—é—á–µ–≤—ã–µ –∑–∞–¥–∞—á–∏ –≤ –Ω–∏—à–µ\n"
            "‚Ä¢ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é (–∫—É–¥–∞ –≤—Å—Ç–∞–≤–ª—è—Ç—å, —á—Ç–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å)\n"
            "‚Ä¢ üéÅ –ë–æ–Ω—É—Å: —á–µ–∫-–ª–∏—Å—Ç ¬´<i>–ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å —Ç–æ–≤–∞—Ä –≤–∏–∑—É–∞–ª—å–Ω–æ –∂–µ–ª–∞–Ω–Ω—ã–º –∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º</i>¬ª ‚Äî —á—Ç–æ–±—ã –≤–Ω–µ–¥—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—ã—Å—Ç—Ä–µ–µ"
        ),

        "freelance": (
            "üíº <b>–ü—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ñ—Ä–∏–ª–∞–Ω—Å–µ—Ä–æ–≤ –∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ —É—Å–ª—É–≥</b>\n\n"
            "üß† –£–ø–∞–∫—É–π —Å–≤–æ–∏ —É—Å–ª—É–≥–∏ –∏ —É–≤–µ–ª–∏—á—å –¥–æ—Ö–æ–¥:\n"
            "‚Ä¢ –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è –∏ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ\n"
            "‚Ä¢ –°—Ü–µ–Ω–∞—Ä–∏–∏ –ø–µ—Ä–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∫–ª–∏–µ–Ω—Ç—É\n"
            "‚Ä¢ –®–∞–±–ª–æ–Ω—ã –ø—Ä–æ–≥—Ä–µ–≤–∞ –∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è —Ü–µ–Ω–Ω–æ—Å—Ç–∏\n\n"
            "üß© –¢—ã –ø–æ–ª—É—á–∏—à—å 5 –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ—Ä–∞–±–æ—Ç–∞–Ω –ø–æ–¥ –∫–ª—é—á–µ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –Ω–∏—à–∏.\n"
            "–û–Ω–∏ —Ç–æ—á–Ω–µ–µ, –≥–ª—É–±–∂–µ –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω–µ–µ, —á–µ–º –≤ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º PDF ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.\n\n"
            "üí¨ –í–æ–∑—Ä–∞–∂–µ–Ω–∏—è:\n"
            "‚Äì ¬´–£—Å–ª—É–≥–∏ —Å–ª–æ–∂–Ω–æ –æ–±—ä—è—Å–Ω–∏—Ç—å¬ª ‚Üí –≠—Ç–∏ –ø—Ä–æ–º–ø—Ç—ã –ø–µ—Ä–µ–≤–æ–¥—è—Ç —ç–∫—Å–ø–µ—Ä—Ç–Ω–æ—Å—Ç—å –≤ –ø—Ä–æ—Å—Ç—É—é –≤—ã–≥–æ–¥—É –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞\n"
            "‚Äì ¬´–ú–∞–ª–æ –∑–∞–∫–∞–∑–æ–≤¬ª ‚Üí –¢—ã –ª–∏–±–æ –Ω–µ –¥–æ–Ω–æ—Å–∏—à—å —Ü–µ–Ω–Ω–æ—Å—Ç—å, –ª–∏–±–æ –Ω–µ —Ü–µ–ø–ª—è–µ—à—å ‚Äî PDF –∏—Å–ø—Ä–∞–≤–∏—Ç —ç—Ç–æ\n\n"
            "üéØ –£–∂–µ —Å–µ–≥–æ–¥–Ω—è —Ç—ã —Å–º–æ–∂–µ—à—å –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å, –∑–∞—è–≤–∫—É –∏ –Ω–∞—á–∞—Ç—å –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –±–æ–ª—å—à–µ\n"
            "‚ùó –ò–ª–∏ –æ—Å—Ç–∞–Ω–µ—à—å—Å—è —Å—Ä–µ–¥–∏ —Ç–µ—Ö, –∫—Ç–æ –ø–∏—à–µ—Ç ¬´–¥–µ–ª–∞—é –±—ã—Å—Ç—Ä–æ –∏ –Ω–µ–¥–æ—Ä–æ–≥–æ¬ª ‚Äî –∏ —Å–∏–¥–∏—Ç –±–µ–∑ –∑–∞–∫–∞–∑–æ–≤\n"
            "üí≥ PDF –∑–∞ 249 ‚ÇΩ ‚Äî –∫–∞–∫ —É–ø–∞–∫–æ–≤–∫–∞ –Ω–∞ –º–∏–ª–ª–∏–æ–Ω –±–µ–∑ –¥–∏–∑–∞–π–Ω–∞\n\n"
            "üîç <b>–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ PDF:</b>\n"
            "‚Ä¢ 5 –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ –ø–æ–¥ –∫–ª—é—á–µ–≤—ã–µ –∑–∞–¥–∞—á–∏ –≤ –Ω–∏—à–µ\n"
            "‚Ä¢ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é (–∫—É–¥–∞ –≤—Å—Ç–∞–≤–ª—è—Ç—å, —á—Ç–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å)\n"
            "‚Ä¢ üéÅ –ë–æ–Ω—É—Å: —á–µ–∫-–ª–∏—Å—Ç ¬´<i>–ö–∞–∫ –ø—Ä–µ–ø–æ–¥–Ω–µ—Å—Ç–∏ —Å–≤–æ—é —É—Å–ª—É–≥—É, —á—Ç–æ–±—ã –ø–ª–∞—Ç–∏–ª–∏ –¥–æ—Ä–æ–∂–µ</i>¬ª ‚Äî —á—Ç–æ–±—ã –≤–Ω–µ–¥—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—ã—Å—Ç—Ä–µ–µ"
        ),
    }

    text = descriptions.get(niche, "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ —ç—Ç–æ–π –Ω–∏—à–µ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–∑–∂–µ.")

    user_id = callback.from_user.id
    payment_link = generate_payment_url(user_id, niche, 1)

    kb = InlineKeyboardBuilder()
    kb.button(text="üí≥ –û–ø–ª–∞—Ç–∏—Ç—å 249 ‚ÇΩ", url=payment_link)

    await callback.message.answer(text, parse_mode=ParseMode.HTML, reply_markup=kb.as_markup())
    await callback.answer()


custom_requests = {}  # user_id: {"text": str, "timestamp": float}


class CustomPromptForm(StatesGroup):
    waiting_for_description = State()


async def clear_request_after_timeout(user_id: int, delay: int = 1800):
    await asyncio.sleep(delay)
    if user_id in custom_requests:
        del custom_requests[user_id]


@router.message(CustomPromptForm.waiting_for_description)
async def receive_description(message: Message, state: FSMContext):
    user_id = message.from_user.id
    description = message.text.strip()

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–∞—è–≤–∫—É
    custom_requests[user_id] = {
        "text": description,
        "timestamp": time.time()
    }

    payment_link = generate_payment_url(user_id, "custom", 1)

    kb = InlineKeyboardBuilder()
    kb.button(text="üí≥ –û–ø–ª–∞—Ç–∏—Ç—å 499 ‚ÇΩ", url=payment_link)

    await message.answer(
        "‚úÖ <b>–ó–∞—è–≤–∫–∞ –ø–æ–ª—É—á–µ–Ω–∞!</b>\n\n"
        "–ú—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–º <b>3 –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö AI-–ø—Ä–æ–º–ø—Ç–∞</b> ‚Äî —Å—Ç—Ä–æ–≥–æ –ø–æ–¥ —Ç–≤–æ—é –∑–∞–¥–∞—á—É: –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ, —Ç–æ–Ω—É, –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É.\n\n"
        "üí° <b>–¢—ã –ø–µ—Ä–µ—Ö–æ–¥–∏—à—å –Ω–∞ –ª–∏—á–Ω—É—é —Ä–∞–±–æ—Ç—É —Å–æ –º–Ω–æ–π, –∞–≤—Ç–æ—Ä–æ–º –ø—Ä–æ–µ–∫—Ç–∞</b>. –ú—ã —Ä–∞–∑–±–µ—Ä—ë–º —Ç–≤–æ–π –∑–∞–ø—Ä–æ—Å, –∏ —è –ª–∏—á–Ω–æ —Å–æ—Å—Ç–∞–≤–ª—é –ø—Ä–æ–º–ø—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ—à–∞—Ç —Ç–≤–æ—é –∑–∞–¥–∞—á—É. "
        "–ù–∏–∫–∞–∫–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤ ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ–¥ —Ç–≤–æ–π –±–∏–∑–Ω–µ—Å, –ø—Ä–æ–¥—É–∫—Ç –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç.\n\n"
        "üìå <b>–¢—ã –Ω–µ —É–π–¥—ë—à—å –±–µ–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞</b> ‚Äî —è –¥–æ–≤–µ–¥—É –¥–æ –≥–æ—Ç–æ–≤–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ —Å—Ä–∞–∑—É –≤–Ω–µ–¥—Ä–∏—Ç—å.\n\n"
        "‚è± <i>–ì–æ—Ç–æ–≤—ã–π PDF —Ç—ã –ø–æ–ª—É—á–∏—à—å –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã</i>\n\n"
        "üí≥ <b>–°—Ç–æ–∏–º–æ—Å—Ç—å ‚Äî 499 ‚ÇΩ</b>\n"
        "‚è≥ –í–∞–∂–Ω–æ: —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–ø–ª–∞—Ç—É –±—É–¥–µ—Ç –∞–∫—Ç–∏–≤–Ω–∞ <b>—Ç–æ–ª—å–∫–æ 30 –º–∏–Ω—É—Ç</b>\n\n"
        "–ü–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã —è –ø–æ–ª—É—á—É —Ç–≤–æ—é –∑–∞—è–≤–∫—É –∏ —Å—Ä–∞–∑—É –≤–∫–ª—é—á—É—Å—å –≤ —Ä–∞–±–æ—Ç—É.",
        parse_mode=ParseMode.HTML,
        reply_markup=kb.as_markup()
    )

    await state.clear()

    # –ó–∞–ø—É—Å–∫–∞–µ–º –∞–≤—Ç–æ—É–¥–∞–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏ —á–µ—Ä–µ–∑ 30 –º–∏–Ω—É—Ç
    asyncio.create_task(clear_request_after_timeout(user_id, delay=1800))


@router.message(lambda msg: msg.text == "üì© –ù–∞–ø–∏—Å–∞—Ç—å –∞–≤—Ç–æ—Ä—É")
async def contact_author(message: Message):
    await message.answer(
        "üì© <b>–°–≤—è–∑–∞—Ç—å—Å—è —Å –∞–≤—Ç–æ—Ä–æ–º –ø—Ä–æ–µ–∫—Ç–∞</b>\n\n"
        "–ï—Å–ª–∏ —É —Ç–µ–±—è –æ—Å—Ç–∞–ª–∏—Å—å –≤–æ–ø—Ä–æ—Å—ã, —á—Ç–æ-—Ç–æ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ –∏–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å ‚Äî —Ç—ã –º–æ–∂–µ—à—å –Ω–∞–ø—Ä—è–º—É—é –Ω–∞–ø–∏—Å–∞—Ç—å –∞–≤—Ç–æ—Ä—É –ø—Ä–æ–µ–∫—Ç–∞.\n\n"
        "<b>–°–µ—Ä–≥–µ–π –ö–æ–≤–∞–ª–µ–≤—Å–∫–∏–π</b> ‚Äî —Å–æ–∑–¥–∞—Ç–µ–ª—å —ç—Ç–æ–≥–æ –±–æ—Ç–∞ –∏ –≤—Å–µ—Ö PDF, –æ—Ç–≤–µ—á–∞–µ—Ç –ª–∏—á–Ω–æ. –ü—Ä–æ—Å—å–±–∞ —É–≤–∞–∂–∏—Ç–µ–ª—å–Ω–æ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Å—Ä–∞–∑—É –ø–∏—Å–∞—Ç—å –ø–æ –¥–µ–ª—É üôè\n\n"
        "üîó <a href=\"https://t.me/ser_kovalevsky\">–ù–∞–ø–∏—Å–∞—Ç—å –°–µ—Ä–≥–µ—é –ö–æ–≤–∞–ª–µ–≤—Å–∫–æ–º—É</a>\n",
        parse_mode=ParseMode.HTML,
        reply_markup=types.ReplyKeyboardRemove()
    )


# –¢–∞–±–ª–∏—Ü–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π –∫–æ–¥–æ–≤ —Ç–æ–≤–∞—Ä–∞ –∏ PDF
PRODUCTS = {
    "reels": "data/–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ Reels-–ø—Ä–æ–º–ø—Ç—ã –¥–ª—è Instagram –∏ TikTok.pdf",
    "smm": "data/–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è SMM-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç-–º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞.pdf",
    "blog": "data/–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –±–ª–æ–≥–µ—Ä–æ–≤ –∏ –ª–∏—á–Ω–æ–≥–æ –±—Ä–µ–Ω–¥–∞.pdf",
    "offline": "data/–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –º–∞–ª–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞ –∏ –æ—Ñ–ª–∞–π–Ω-—É—Å–ª—É–≥.pdf",
    "courses": "data/–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –æ–Ω–ª–∞–π–Ω-–∫—É—Ä—Å–æ–≤ –∏ –∏–Ω—Ñ–æ–±–∏–∑–Ω–µ—Å–∞.pdf",
    "ecom": "data/–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ç–æ–≤–∞—Ä–Ω–æ–≥–æ –±–∏–∑–Ω–µ—Å–∞ –∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–æ–≤.pdf",
    "freelance": "data/–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ñ—Ä–∏–ª–∞–Ω—Å–µ—Ä–æ–≤ –∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ —É—Å–ª—É–≥.pdf"
}

# --- FastAPI –¥–ª—è Robokassa --- #
app = FastAPI()


@app.post("/telegram_webhook")
async def telegram_webhook(request: Request):
    body = await request.body()
    await dp.feed_webhook_update(bot=bot, update=types.Update.model_validate_json(body))
    return {"ok": True}


@app.post("/payment_callback")
async def robokassa_payment_handler(request: Request):
    form = await request.form()
    OutSum = form.get("OutSum")
    InvId = form.get("InvId")
    SignatureValue = form.get("SignatureValue")

    if not all([OutSum, InvId, SignatureValue]):
        return "invalid form"

    # –¢–æ–ª—å–∫–æ –±–æ–µ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
    base = f"{OutSum}:{InvId}:{ROBO_PASSWORD2}"
    expected_signature = hashlib.md5(base.encode()).hexdigest().upper()

    if SignatureValue.upper() != expected_signature:
        return "bad sign"

    try:
        inv_id = int(InvId)
        inv_id_map = load_inv_map()  # —á–∏—Ç–∞–µ–º –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∫–∞—Ä—Ç—É –∏–∑ —Ñ–∞–π–ª–∞
        
        logging.info(f"[CALLBACK] inv_id = {inv_id}")
        logging.info(f"[CALLBACK] inv_id_map keys = {list(inv_id_map.keys())}")

        entry = inv_id_map.get(str(inv_id))
        if not entry:
            logging.warning(f"[CALLBACK] inv_id {inv_id} not found in inv_id_map")
            return "unknown invoice"

        tg_user_id = entry["user_id"]
        product_code = entry["product_code"]

        is_paid = await check_payment_status(inv_id)
        if not is_paid:
            logging.warning(f"[PAYMENT] –û–ø–ª–∞—Ç–∞ –ø–æ InvId {inv_id} –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ ‚Äî –æ—Ç–º–µ–Ω–∞ –≤—ã–¥–∞—á–∏")
            return "not confirmed"

        
        # –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –≤—ã–¥–∞—á–∏
        if tg_user_id in purchased_paid_pdf and product_code in purchased_paid_pdf[tg_user_id]:
            logging.info(f"[PAYMENT] –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞: {product_code} —É–∂–µ –∫—É–ø–ª–µ–Ω user_id={tg_user_id}")
            return "OK"


        # === –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±—ã—á–Ω—ã—Ö PDF ===
        if product_code in PRODUCTS:
            pdf_path = PRODUCTS[product_code]
            file = FSInputFile(pdf_path)
            await bot.send_document(chat_id=tg_user_id, document=file,
                                    caption="‚úÖ –°–ø–∞—Å–∏–±–æ –∑–∞ –æ–ø–ª–∞—Ç—É! –í–æ—Ç –≤–∞—à PDF.")
            if IS_DEV:
                print(f"[DEV] –ü–æ–ª—É—á–µ–Ω —Ç–µ—Å—Ç–æ–≤—ã–π –ø–ª–∞—Ç—ë–∂: {InvId}, Signature={SignatureValue}")
            
            # –£–¥–∞–ª—è–µ–º –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫—É–ø–∏–ª
            paid_view_timestamps.pop(tg_user_id, None)
            
            if str(inv_id) in inv_id_map:
                del inv_id_map[str(inv_id)]
                save_inv_map(inv_id_map)

            if tg_user_id not in purchased_paid_pdf:
                purchased_paid_pdf[tg_user_id] = set()
            purchased_paid_pdf[tg_user_id].add(product_code)

            return "OK"

        # === –û–±—Ä–∞–±–æ—Ç–∫–∞ custom-–ø—Ä–æ–¥—É–∫—Ç–∞ ===
        if product_code == "custom":
            if tg_user_id in custom_requests:
                description = custom_requests[tg_user_id]["text"]
                username_link = f"@{tg_user_id}"  # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –µ—Å–ª–∏ –Ω–µ—Ç username

                # –ü–æ–ø—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å username
                try:
                    user = await bot.get_chat(tg_user_id)
                    username_link = f"@{user.username}" if user.username else f"ID: {tg_user_id}"
                except Exception:
                    pass

                ADMIN_ID = 1555496965  # ‚Üê –ó–ê–ú–ï–ù–ò –Ω–∞ —Å–≤–æ–π Telegram ID

                formatted = (
                    "üì¨ <b>–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ –Ω–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã</b>\n\n"
                    f"üë§ {username_link} (ID: <code>{tg_user_id}</code>)\n"
                    f"‚úèÔ∏è <b>–ó–∞–¥–∞—á–∞:</b>\n{description}"
                )

                await bot.send_message(chat_id=ADMIN_ID, text=formatted, parse_mode=ParseMode.HTML)
                await bot.send_message(chat_id=tg_user_id,
                                       text="‚úÖ –°–ø–∞—Å–∏–±–æ –∑–∞ –æ–ø–ª–∞—Ç—É! –í–∞—à–∞ –∑–∞—è–≤–∫–∞ –ø–µ—Ä–µ–¥–∞–Ω–∞ –∞–≤—Ç–æ—Ä—É ‚Äî –æ–Ω —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ Telegram.")
                if IS_DEV:
                    print(f"[DEV] –ü–æ–ª—É—á–µ–Ω —Ç–µ—Å—Ç–æ–≤—ã–π –ø–ª–∞—Ç—ë–∂: {InvId}, Signature={SignatureValue}")
                    
                del custom_requests[tg_user_id]
                
                if str(inv_id) in inv_id_map:
                    del inv_id_map[str(inv_id)]
                    save_inv_map(inv_id_map)
                    
                return "OK"
            else:
                return "no custom request"

        return "product not found"
    except Exception as e:
        return f"error: {e}"


async def reminder_loop():
    while True:
        now = time.time()

        # –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º PDF
        for user_id, data in list(free_pdf_reminders.items()):
            start = data["start"]
            last_remind = data.get("last_remind")
            attempts = data.get("attempts", 0)

            if now - start >= 40 * 60 and (not last_remind or now - last_remind >= 2 * 3600):
                try:
                    text = FREE_REMINDER_TEXTS[min(attempts, len(FREE_REMINDER_TEXTS) - 1)]
                    await bot.send_message(
                        chat_id=user_id,
                        text=text,
                        reply_markup=get_main_keyboard()
                    )
                    free_pdf_reminders[user_id]["last_remind"] = now
                    free_pdf_reminders[user_id]["attempts"] = attempts + 1
                    if free_pdf_reminders[user_id]["attempts"] >= 3:
                        del free_pdf_reminders[user_id]
                except Exception as e:
                    logging.warning(f"[FREE REMINDER] –û—à–∏–±–∫–∞ –¥–ª—è {user_id}: {e}")

        # –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –ø–ª–∞—Ç–Ω—ã—Ö PDF
        for user_id, data in list(paid_view_timestamps.items()):
            start = data["start"]
            last_remind = data.get("last_remind")
            attempts = data.get("attempts", 0)

            if now - start >= 8 * 3600 and (not last_remind or now - last_remind >= 24 * 3600):
                try:
                    text = PAID_REMINDER_TEXTS[min(attempts, len(PAID_REMINDER_TEXTS) - 1)]
                    await bot.send_message(
                        chat_id=user_id,
                        text=text,
                        reply_markup=types.ReplyKeyboardMarkup(
                            keyboard=[[types.KeyboardButton(text="üî• –ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ –ø–ª–∞—Ç–Ω—ã—Ö PDF?")]],
                            resize_keyboard=True
                        )
                    )
                    paid_view_timestamps[user_id]["last_remind"] = now
                    paid_view_timestamps[user_id]["attempts"] = attempts + 1
                    if paid_view_timestamps[user_id]["attempts"] >= 3:
                        del paid_view_timestamps[user_id]
                except Exception as e:
                    logging.warning(f"[PAID REMINDER] –û—à–∏–±–∫–∞ –¥–ª—è {user_id}: {e}")

        await asyncio.sleep(300)


# --- –ó–∞–ø—É—Å–∫ aiogram-–±–æ—Ç–∞ --- #
if IS_DEV:
    @app.on_event("startup")
    async def dev_start():
        logging.basicConfig(level=logging.INFO)
        dp.include_router(router)
        asyncio.create_task(dp.start_polling(bot))
        asyncio.create_task(reminder_loop())
else:
    @app.on_event("startup")
    async def prod_start():
        await bot.set_webhook("https://aiquickstartbot-production.up.railway.app/telegram_webhook")
        logging.basicConfig(level=logging.INFO)
        dp.include_router(router)
        asyncio.create_task(reminder_loop())  # –±–µ–∑ polling ‚Äî webhook –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—Ö–æ–¥—è—â–∏–µ


if IS_DEV:
    if __name__ == "__main__":
        import uvicorn
        uvicorn.run("bot_aiogram_v3:app", host="0.0.0.0", port=8000, reload=True)
